<template>
  <div class="promo">
    <div class="logo">
      <svg
        width="231"
        height="68"
        viewBox="0 0 231 68"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M102.895 24.1053H107.647L97.5916 45.4042H96.0642L85.9663 24.1053H90.7182L96.8279 37.8944L102.895 24.1053ZM129.595 35.9852H114.066C114.349 37.6823 115.099 39.0258 116.315 40.0158C117.56 40.9775 119.073 41.4584 120.855 41.4584C123.061 41.4584 125.084 40.6381 126.922 38.9976L129.043 42.0524C126.696 44.2869 123.924 45.4042 120.728 45.4042C117.56 45.4042 114.901 44.3718 112.751 42.307C110.601 40.2138 109.527 37.6257 109.527 34.5426C109.47 31.5443 110.517 28.9704 112.666 26.8207C114.816 24.6427 117.362 23.582 120.303 23.6386C123.047 23.6386 125.338 24.5578 127.177 26.3964C129.015 28.2067 129.934 30.4695 129.934 33.1849C129.934 34.0052 129.821 34.9386 129.595 35.9852ZM114.151 32.506H125.48C125.451 30.9503 124.928 29.7199 123.91 28.8148C122.891 27.8814 121.633 27.4147 120.134 27.4147C118.663 27.4147 117.376 27.8814 116.273 28.8148C115.198 29.7199 114.491 30.9503 114.151 32.506ZM153.241 31.912V44.9375H148.786V32.506C148.786 31.0635 148.362 29.9038 147.513 29.0269C146.693 28.1218 145.604 27.6692 144.246 27.6692C142.86 27.6692 141.714 28.1218 140.809 29.0269C139.933 29.9321 139.494 31.0918 139.494 32.506V44.9375H135.039V24.1053H139.197V26.1418C140.781 24.473 142.86 23.6386 145.434 23.6386C147.838 23.6386 149.733 24.3881 151.119 25.8872C152.534 27.3864 153.241 29.3946 153.241 31.912ZM157.492 41.3735L160.038 38.5733C161.933 40.5533 163.884 41.5432 165.893 41.5432C166.883 41.5432 167.689 41.3452 168.311 40.9493C168.933 40.525 169.245 39.9451 169.245 39.2097C169.245 38.644 169.032 38.1914 168.608 37.852C168.184 37.4843 167.42 37.0741 166.317 36.6216L164.196 35.7306C162.3 34.9386 160.914 34.09 160.038 33.1849C159.189 32.2515 158.765 31.0776 158.765 29.6634C158.765 27.8248 159.444 26.3681 160.801 25.2933C162.187 24.1901 163.955 23.6386 166.105 23.6386C169.103 23.6386 171.507 24.7134 173.318 26.8631L170.899 29.6209C169.542 28.2067 167.915 27.4995 166.02 27.4995C164.125 27.4995 163.177 28.1642 163.177 29.4936C163.177 30.0028 163.375 30.4412 163.771 30.8089C164.167 31.1483 164.889 31.5302 165.935 31.9545L167.929 32.7606C169.938 33.6092 171.38 34.5143 172.257 35.476C173.162 36.4094 173.615 37.5974 173.615 39.04C173.615 41.0483 172.879 42.6181 171.408 43.7495C169.938 44.8526 168.099 45.4042 165.893 45.4042C162.357 45.4042 159.557 44.0607 157.492 41.3735ZM178.54 36.1973V24.1053H182.952V36.5367C182.952 37.951 183.391 39.0966 184.267 39.9734C185.144 40.8503 186.276 41.2887 187.662 41.2887C188.991 41.2887 190.08 40.8503 190.929 39.9734C191.805 39.0966 192.244 37.951 192.244 36.5367V24.1053H196.699V36.1973C196.699 38.941 195.836 41.1614 194.111 42.8585C192.414 44.5556 190.264 45.4042 187.662 45.4042C185.003 45.4042 182.811 44.5698 181.085 42.9009C179.388 41.2038 178.54 38.9693 178.54 36.1973ZM200.997 41.3735L203.543 38.5733C205.438 40.5533 207.39 41.5432 209.398 41.5432C210.388 41.5432 211.194 41.3452 211.817 40.9493C212.439 40.525 212.75 39.9451 212.75 39.2097C212.75 38.644 212.538 38.1914 212.114 37.852C211.689 37.4843 210.926 37.0741 209.822 36.6216L207.701 35.7306C205.806 34.9386 204.42 34.09 203.543 33.1849C202.694 32.2515 202.27 31.0776 202.27 29.6634C202.27 27.8248 202.949 26.3681 204.307 25.2933C205.693 24.1901 207.461 23.6386 209.61 23.6386C212.609 23.6386 215.013 24.7134 216.823 26.8631L214.405 29.6209C213.047 28.2067 211.421 27.4995 209.525 27.4995C207.63 27.4995 206.683 28.1642 206.683 29.4936C206.683 30.0028 206.881 30.4412 207.277 30.8089C207.673 31.1483 208.394 31.5302 209.441 31.9545L211.435 32.7606C213.443 33.6092 214.886 34.5143 215.762 35.476C216.668 36.4094 217.12 37.5974 217.12 39.04C217.12 41.0483 216.385 42.6181 214.914 43.7495C213.443 44.8526 211.604 45.4042 209.398 45.4042C205.862 45.4042 203.062 44.0607 200.997 41.3735Z"
          fill="white"
        />
        <path
          d="M222.639 44.4708C221.988 43.8485 221.663 43.0707 221.663 42.1372C221.663 41.2038 221.988 40.426 222.639 39.8037C223.29 39.1531 224.082 38.8278 225.015 38.8278C225.948 38.8278 226.726 39.139 227.349 39.7613C227.971 40.3835 228.282 41.1755 228.282 42.1372C228.282 43.0707 227.971 43.8485 227.349 44.4708C226.726 45.0931 225.948 45.4042 225.015 45.4042C224.082 45.4042 223.29 45.0931 222.639 44.4708Z"
          fill="#FF4900"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M13.815 0H54.8653C62.4951 0 68.6803 6.12392 68.6803 13.6782V54.3218C68.6803 61.8761 62.4951 68 54.8653 68H13.815C6.18519 68 0 61.8761 0 54.3218V13.6782C0 6.12392 6.18519 0 13.815 0ZM13.815 7.81609C10.5451 7.81609 7.89429 10.4406 7.89429 13.6782V54.3218C7.89429 57.5594 10.5451 60.1839 13.815 60.1839H54.8653C58.1352 60.1839 60.786 57.5594 60.786 54.3218V13.6782C60.786 10.4406 58.1352 7.81609 54.8653 7.81609H13.815Z"
          fill="url(#paint0_linear_1507_1804)"
        />
        <path
          d="M29.2496 34.0292C29.2496 37.4286 26.4663 40.1843 23.0329 40.1843C19.5995 40.1843 16.8161 37.4286 16.8161 34.0292C16.8161 30.6298 19.5995 27.874 23.0329 27.874C26.4663 27.874 29.2496 30.6298 29.2496 34.0292Z"
          fill="url(#paint1_linear_1507_1804)"
        />
        <path
          d="M52.0405 34.0292C52.0405 37.4286 49.2571 40.1843 45.8237 40.1843C42.3903 40.1843 39.607 37.4286 39.607 34.0292C39.607 30.6298 42.3903 27.874 45.8237 27.874C49.2571 27.874 52.0405 30.6298 52.0405 34.0292Z"
          fill="url(#paint2_linear_1507_1804)"
        />
        <defs>
          <linearGradient
            id="paint0_linear_1507_1804"
            x1="0"
            y1="0"
            x2="67.9966"
            y2="68.6769"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#FF4900" />
            <stop offset="1" stop-color="#FF6C36" />
          </linearGradient>
          <linearGradient
            id="paint1_linear_1507_1804"
            x1="0"
            y1="0"
            x2="67.9966"
            y2="68.6769"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#FF4900" />
            <stop offset="1" stop-color="#FF6C36" />
          </linearGradient>
          <linearGradient
            id="paint2_linear_1507_1804"
            x1="0"
            y1="0"
            x2="67.9966"
            y2="68.6769"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#FF4900" />
            <stop offset="1" stop-color="#FF6C36" />
          </linearGradient>
        </defs>
      </svg>
    </div>
    <div class="promocode-inputs">
      <input type="text" v-model="promocode1" class="input-l" id="input1" maxlength="1" />
      <input type="text" v-model="promocode2" class="input-l" id="input2" maxlength="1" />
      <input type="text" v-model="promocode3" class="input-l" id="input3" maxlength="1" />
      <input type="text" v-model="promocode4" class="input-l" id="input4" maxlength="1" />
      <input type="text" v-model="promocode5" class="input-l" id="input5" maxlength="1" />
      <input type="text" v-model="promocode6" class="input-l" id="input6" maxlength="1" />
      <input type="text" v-model="promocode7" class="input-l" id="input7" maxlength="1" />
    </div>
  </div>
  <div class="intro">
    <video-player />
  </div>
</template>

<style scoped>
.promo {
  position: absolute;
  font-size: 95.0976px;
  line-height: 120px;
  z-index: 100;
  width: 100%;
  height: 100%;
}

.logo {
  width: 231px;
  margin-left: auto;
  margin-right: auto;
  padding-top: 175px;
}

.promocode-inputs {
  margin-top: 65px;
  margin-left: auto;
  margin-right: auto;
  width: 940px;
  display: flex;
  justify-content: space-between;
}

.input-l {
  width: 120px;
  height: 140px;
  background: #000000;
  border: 6px solid #272727;
  border-radius: 15.0837px;
  text-align: center;
}
</style>

<script>
import VideoPlayer from '@/components/promocode/VideoPlayer.vue';

export default {
  components: {
    VideoPlayer,
  },

  mounted() {
    const inputs = document.querySelectorAll('.input-l');
    inputs.forEach((input, index) => {
      input.addEventListener('focusin', (event) => {
        event.target.style.border = '6px solid #FFFFFF';
      });

      input.addEventListener('change', (event) => {
        event.target.style.border = '6px solid #FFFFFF';
      });

      input.addEventListener('focusout', (event) => {
        if (event.target.value == '') {
          event.target.style.border = '6px solid #272727';
        }
      });

      input.addEventListener('input', (event) => {
        if (event.target.value != '') {
          const element = inputs[index + 1];
          element.focus();
        } else {
          const element = inputs[index - 1];
          element.focus();
        }
      });
    });

    const video = document.querySelector('.video__media');

    video.addEventListener('ended', (event) => {
      video.remove();
      const promo = document.querySelector('.promo');
      promo.style.zIndex = '100';
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        const promocodeLetters = [
          this.promocode1,
          this.promocode2,
          this.promocode3,
          this.promocode4,
          this.promocode5,
          this.promocode6,
          this.promocode7,
        ];
        let promocodeString = '';
        promocodeLetters.forEach((promocodeLetter) => {
          if (promocodeLetter) {
            promocodeString += promocodeLetter;
          }
        });
        console.log(promocodeString.trim() === '2341234', promocodeString);
        if (promocodeString.trim() === '2341234') {
          console.log('push');
          this.$router.push('plinko');
        }
      }
    });
  },

  data() {
    return {
      videoOptions: {
        autoplay: true,
        muted: true,
        controls: true,
        sources: [
          {
            src: '../../assets/video/vensus11.mov',
            type: 'video/mov',
          },
        ],
        promo: '2341234',
        promocode1: '',
        promocode2: '',
        promocode3: '',
        promocode4: '',
        promocode5: '',
        promocode6: '',
        promocode7: '',
      },
    };
  },
};
</script>
